<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="ac">

	<select id="ac_list" resultType="vs.ac.ac_001_1.vo.AcVO">		
		<![CDATA[ 
		select co_b_index, co_b_title, co_b_see, co_b_good, co_b_date, co_b_day, co_b_area, 
					co_b_period, co_b_type, co_b_text, co_b_price, co_souvenir, co_rating
	 from(
		select rownum rn, a.*
		from
		        (
			        select co_b_index, co_b_title, co_b_see, co_b_good, co_b_date, co_b_day, co_b_area, 
							co_b_period, co_b_type, co_b_text, co_b_price, co_souvenir, co_rating
			        from competition
			        where 
			        ]]>
			        	<!-- <include refid="Page_DTO"/>-->
			        <![CDATA[ 
			        co_b_index > '0'
			        order by to_number(substr(co_b_index, 4)) desc
		        )a
		where rownum <= (#{page} * #{amount})
		)
	where rn > ((#{page}-1) * #{amount})
	]]>
	</select>

	<insert id="ac_insert">
	<![CDATA[
		insert into competition(co_b_index, co_b_title, co_b_text, 
								co_b_day, co_b_date, co_b_area,
								co_b_period, co_b_type, co_b_price,
								 co_souvenir, co_rating
								)
		values ('co_'||co_b_index.nextval, #{co_b_title}, #{co_b_text},
				 #{co_b_day}, sysdate, #{co_b_area},
				 #{co_b_period}, #{co_b_type}, #{co_b_price},
				  #{co_souvenir}, #{co_rating}
				 )
		]]>
	</insert>

	<!-- 게시물 총합 출력 쿼리 -->
	<select id="get_total" resultType="int">
		select count(co_b_index) from
		competition 
	

	</select>

</mapper>

